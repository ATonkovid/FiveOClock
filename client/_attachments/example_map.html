<!DOCTYPE html>
<html xmlns:ng="http://angularjs.org/" ng-app="appMaps">

<head>
    <meta charset="utf-8" />
    <title>AngularJS Plunker</title>
    <link rel="stylesheet" href="style.css" />
    <script src='//maps.googleapis.com/maps/api/js?sensor=false'></script>
    <script data-require="angular.js@1.2.x" src="https://code.angularjs.org/1.2.26/angular.js" data-semver="1.2.26"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.js"></script>
    <script src="http://rawgit.com/angular-ui/angular-google-maps/master/dist/angular-google-maps.js"></script>

    <!--script-->
    <!--css-->
    <style type="text/css">
        html,
        body,
        #map_canvas {
            height: 100%;
            width: 100%;
            margin: 0px;
        }
        #map_canvas {
            position: relative;
        }
        .angular-google-map-container {
            height: 400px;
        }
    </style>
</head>

<body>

<div id="map_canvas" ng-controller="mainCtrl">
    {{settings.status}}
    <ui-gmap-google-map center='settings.Location.coords' zoom='12' options='options'>
        <ui-gmap-marker idKey='settings.marker.id' coords='settings.marker.coords'></ui-gmap-marker>
    </ui-gmap-google-map>

</div>
<!--example-->
<script>
    angular.module('appMaps', ['uiGmapgoogle-maps'])
            .controller('mainCtrl', function($scope) {
                $scope.settings = {
                    Location: {
                        id: 1,
                        coords: {
                            latitude: 37.935533061836,
                            longitude: 23.90625
                        },
                        address: "Via Condotti 87",
                        city: "Rome",
                        timezone: "",
                        country: ""
                    }
                }

                // WE NEED TO CLONE THE MARKER DEEP (NEW REFERENCE)
                // THIS IS BECAUSE THE ORIGINAL LOCATION IS BOUND TO THE MAP CENTER
                // THIS WAY THE MARKER STAYS PUT!
                $scope.settings.marker = _.clone($scope.settings.Location, true);

                $scope.options = {
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    mapTypeControl: false,
                    styles: [{"featureType":"water","elementType":"geometry","stylers":[{"color":"#000000"},{"lightness":17}]},{"featureType":"landscape","elementType":"geometry","stylers":[{"color":"#000000"},{"lightness":20}]},{"featureType":"road.highway","elementType":"geometry.fill","stylers":[{"color":"#000000"},{"lightness":17}]},{"featureType":"road.highway","elementType":"geometry.stroke","stylers":[{"color":"#000000"},{"lightness":29},{"weight":0.2}]},{"featureType":"road.arterial","elementType":"geometry","stylers":[{"color":"#000000"},{"lightness":18}]},{"featureType":"road.local","elementType":"geometry","stylers":[{"color":"#000000"},{"lightness":16}]},{"featureType":"poi","elementType":"geometry","stylers":[{"color":"#000000"},{"lightness":21}]},{"elementType":"labels.text.stroke","stylers":[{"visibility":"on"},{"color":"#000000"},{"lightness":16}]},{"elementType":"labels.text.fill","stylers":[{"saturation":36},{"color":"#000000"},{"lightness":40}]},{"elementType":"labels.icon","stylers":[{"visibility":"off"}]},{"featureType":"transit","elementType":"geometry","stylers":[{"color":"#000000"},{"lightness":19}]},{"featureType":"administrative","elementType":"geometry.fill","stylers":[{"color":"#000000"},{"lightness":20}]},{"featureType":"administrative","elementType":"geometry.stroke","stylers":[{"color":"#000000"},{"lightness":17},{"weight":1.2}]}]
                };
            });
</script>
</body>

</html>